{"ast":null,"code":"var _jsxFileName = \"/Users/hyerimkim/Documents/hyerim-gestbook/frontend/src/components/InsertNewComment.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { getAllGuestbookContents, postNewGuestbookContent } from '../services/guestbookService';\n//기본 프로필이미지\nimport profileDefault from '../assets/images/profile_default.png';\nimport { InsertNewCommentSection, ProfileAvatar, ProfileInput, InputContainer, NameInput, ContentInput, SubmitButton } from './InsertNewComment.style';\nimport { getStorage, ref, uploadBytes, listAll, getDownloadURL } from \"firebase/storage\";\nimport { storage } from '../services/firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const InsertNewComment = _ref => {\n  _s();\n  let {\n    data,\n    setData\n  } = _ref;\n  const [name, setName] = useState('');\n  const [content, setContent] = useState('');\n  const [selectedImage, setSelectedImage] = useState([profileDefault, null]);\n  const fileInput = useRef(null);\n\n  //프로필이미지를 누르면 동작하는 메소드\n  const onClickProfile = () => {\n    fileInput.current.click();\n  };\n  //이미지를 변경했을 때 실행됨\n  const onChangeProfile = e => {\n    setSelectedImage([URL.createObjectURL(e.target.files[0]), e.target.files[0]]);\n  };\n  //이름 입력값을 변경할 때 실행됨\n  const onChangeName = e => {\n    setName(e.target.value);\n  };\n  //내용 입력값을 변경할 때 실행됨\n  const onChangeContent = e => {\n    setContent(e.target.value);\n  };\n  //입력란 초기화\n  const inputClear = e => {\n    setName('');\n    setContent('');\n    setSelectedImage([profileDefault, null]);\n  };\n  //등록버튼 누르면 실행됨\n  const onClickButton = async e => {\n    const file = selectedImage[1];\n    if (file !== null && file !== undefined) {\n      const storageRef = ref(storage, `uploads/${Date.now()}_${file.name}`);\n      const uploadTask = uploadBytes(storageRef, file);\n      uploadTask.then(snapshot => {\n        getDownloadURL(snapshot.ref).then(downloadURL => {\n          postNewGuestbookContent({\n            name: name,\n            content: content,\n            profileImage: downloadURL\n          }).then(() => {\n            getAllGuestbookContents().then(res => {\n              setData([...res.data]);\n              inputClear();\n            });\n          });\n        });\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(InsertNewCommentSection, {\n    alt: \"\",\n    children: [/*#__PURE__*/_jsxDEV(ProfileAvatar, {\n      \"aria-label\": \"\\uD504\\uB85C\\uD544\\uC774\\uBBF8\\uC9C0\",\n      src: selectedImage[0],\n      onClick: onClickProfile\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ProfileInput, {\n      type: \"file\",\n      accept: \"image/jpg, image/png, image/jpeg\",\n      onChange: onChangeProfile,\n      ref: fileInput\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n      \"aria-label\": \"\",\n      children: [/*#__PURE__*/_jsxDEV(NameInput, {\n        \"aria-label\": \"\\uC774\\uB984 \\uC785\\uB825\\uCE78\",\n        value: name,\n        onChange: onChangeName,\n        placeholder: \"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ContentInput, {\n        \"aria-label\": \"\\uB0B4\\uC6A9 \\uC785\\uB825\\uCE78\",\n        value: content,\n        onChange: onChangeContent,\n        placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n      \"aria-label\": \"\\uB4F1\\uB85D \\uBC84\\uD2BC\",\n      onClick: onClickButton,\n      children: \"\\uB4F1\\uB85D\\uD558\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n_s(InsertNewComment, \"6DyrtDTWfvhAssJBMd1vr4BzKJI=\");\n_c = InsertNewComment;\nvar _c;\n$RefreshReg$(_c, \"InsertNewComment\");","map":{"version":3,"names":["React","useRef","useState","getAllGuestbookContents","postNewGuestbookContent","profileDefault","InsertNewCommentSection","ProfileAvatar","ProfileInput","InputContainer","NameInput","ContentInput","SubmitButton","getStorage","ref","uploadBytes","listAll","getDownloadURL","storage","jsxDEV","_jsxDEV","InsertNewComment","_ref","_s","data","setData","name","setName","content","setContent","selectedImage","setSelectedImage","fileInput","onClickProfile","current","click","onChangeProfile","e","URL","createObjectURL","target","files","onChangeName","value","onChangeContent","inputClear","onClickButton","file","undefined","storageRef","Date","now","uploadTask","then","snapshot","downloadURL","profileImage","res","alt","children","src","onClick","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","placeholder","_c","$RefreshReg$"],"sources":["/Users/hyerimkim/Documents/hyerim-gestbook/frontend/src/components/InsertNewComment.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { getAllGuestbookContents, postNewGuestbookContent } from '../services/guestbookService'\n//기본 프로필이미지\nimport profileDefault from '../assets/images/profile_default.png'\nimport { InsertNewCommentSection, ProfileAvatar, ProfileInput, InputContainer, NameInput, ContentInput, SubmitButton } from './InsertNewComment.style';\nimport { getStorage, ref, uploadBytes, listAll, getDownloadURL } from \"firebase/storage\";\nimport { storage } from '../services/firebase';\n\nexport const InsertNewComment = ({data, setData}) => {\n    const [name, setName] = useState('');\n    const [content, setContent] = useState('');\n    const [selectedImage, setSelectedImage] = useState([profileDefault,null]);\n    const fileInput = useRef(null);\n\n    //프로필이미지를 누르면 동작하는 메소드\n    const onClickProfile = () => {\n        fileInput.current.click();\n    }\n    //이미지를 변경했을 때 실행됨\n    const onChangeProfile = (e) => {\n        setSelectedImage([URL.createObjectURL(e.target.files[0]),e.target.files[0]]);\n    }\n    //이름 입력값을 변경할 때 실행됨\n    const onChangeName = (e) => {\n        setName(e.target.value);\n    }\n    //내용 입력값을 변경할 때 실행됨\n    const onChangeContent = (e) => {\n        setContent(e.target.value);\n    }\n    //입력란 초기화\n    const inputClear = (e) => {\n        setName('');\n        setContent('');\n        setSelectedImage([profileDefault,null]);\n    }\n    //등록버튼 누르면 실행됨\n    const onClickButton = async (e) => {\n        const file = selectedImage[1];\n\n        if(file!==null && file!==undefined) {\n            const storageRef = ref(storage, `uploads/${Date.now()}_${file.name}`);\n            const uploadTask = uploadBytes(storageRef,file);\n\n            uploadTask.then((snapshot)=>{\n                getDownloadURL(snapshot.ref).then((downloadURL)=>{\n                    postNewGuestbookContent({\n                        name:name,\n                        content:content,\n                        profileImage: downloadURL\n                    })\n                    .then(()=>{\n                        getAllGuestbookContents().then((res)=>{\n                            setData([ ...res.data ])\n                            inputClear()\n                        })\n                    });\n                })\n            })\n        }\n    }\n\n    return (\n        <InsertNewCommentSection alt=''>\n            <ProfileAvatar aria-label='프로필이미지' src={selectedImage[0]} onClick={onClickProfile}/>\n            <ProfileInput type='file' accept='image/jpg, image/png, image/jpeg' onChange={onChangeProfile} ref={fileInput}/>\n            <InputContainer aria-label=''>\n                <NameInput aria-label='이름 입력칸' value={name} onChange={onChangeName} placeholder='이름을 입력하세요.'></NameInput>\n                <ContentInput aria-label='내용 입력칸' value={content} onChange={onChangeContent} placeholder='내용을 입력하세요.'></ContentInput>\n            </InputContainer>\n            <SubmitButton aria-label='등록 버튼' onClick={onClickButton}>등록하기</SubmitButton>\n        </InsertNewCommentSection>\n    );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC/C,SAASC,uBAAuB,EAAEC,uBAAuB,QAAQ,8BAA8B;AAC/F;AACA,OAAOC,cAAc,MAAM,sCAAsC;AACjE,SAASC,uBAAuB,EAAEC,aAAa,EAAEC,YAAY,EAAEC,cAAc,EAAEC,SAAS,EAAEC,YAAY,EAAEC,YAAY,QAAQ,0BAA0B;AACtJ,SAASC,UAAU,EAAEC,GAAG,EAAEC,WAAW,EAAEC,OAAO,EAAEC,cAAc,QAAQ,kBAAkB;AACxF,SAASC,OAAO,QAAQ,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,OAAO,MAAMC,gBAAgB,GAAGC,IAAA,IAAqB;EAAAC,EAAA;EAAA,IAApB;IAACC,IAAI;IAAEC;EAAO,CAAC,GAAAH,IAAA;EAC5C,MAAM,CAACI,IAAI,EAAEC,OAAO,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAAC0B,OAAO,EAAEC,UAAU,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAAC4B,aAAa,EAAEC,gBAAgB,CAAC,GAAG7B,QAAQ,CAAC,CAACG,cAAc,EAAC,IAAI,CAAC,CAAC;EACzE,MAAM2B,SAAS,GAAG/B,MAAM,CAAC,IAAI,CAAC;;EAE9B;EACA,MAAMgC,cAAc,GAAGA,CAAA,KAAM;IACzBD,SAAS,CAACE,OAAO,CAACC,KAAK,CAAC,CAAC;EAC7B,CAAC;EACD;EACA,MAAMC,eAAe,GAAIC,CAAC,IAAK;IAC3BN,gBAAgB,CAAC,CAACO,GAAG,CAACC,eAAe,CAACF,CAAC,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,EAACJ,CAAC,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;EAChF,CAAC;EACD;EACA,MAAMC,YAAY,GAAIL,CAAC,IAAK;IACxBV,OAAO,CAACU,CAAC,CAACG,MAAM,CAACG,KAAK,CAAC;EAC3B,CAAC;EACD;EACA,MAAMC,eAAe,GAAIP,CAAC,IAAK;IAC3BR,UAAU,CAACQ,CAAC,CAACG,MAAM,CAACG,KAAK,CAAC;EAC9B,CAAC;EACD;EACA,MAAME,UAAU,GAAIR,CAAC,IAAK;IACtBV,OAAO,CAAC,EAAE,CAAC;IACXE,UAAU,CAAC,EAAE,CAAC;IACdE,gBAAgB,CAAC,CAAC1B,cAAc,EAAC,IAAI,CAAC,CAAC;EAC3C,CAAC;EACD;EACA,MAAMyC,aAAa,GAAG,MAAOT,CAAC,IAAK;IAC/B,MAAMU,IAAI,GAAGjB,aAAa,CAAC,CAAC,CAAC;IAE7B,IAAGiB,IAAI,KAAG,IAAI,IAAIA,IAAI,KAAGC,SAAS,EAAE;MAChC,MAAMC,UAAU,GAAGnC,GAAG,CAACI,OAAO,EAAG,WAAUgC,IAAI,CAACC,GAAG,CAAC,CAAE,IAAGJ,IAAI,CAACrB,IAAK,EAAC,CAAC;MACrE,MAAM0B,UAAU,GAAGrC,WAAW,CAACkC,UAAU,EAACF,IAAI,CAAC;MAE/CK,UAAU,CAACC,IAAI,CAAEC,QAAQ,IAAG;QACxBrC,cAAc,CAACqC,QAAQ,CAACxC,GAAG,CAAC,CAACuC,IAAI,CAAEE,WAAW,IAAG;UAC7CnD,uBAAuB,CAAC;YACpBsB,IAAI,EAACA,IAAI;YACTE,OAAO,EAACA,OAAO;YACf4B,YAAY,EAAED;UAClB,CAAC,CAAC,CACDF,IAAI,CAAC,MAAI;YACNlD,uBAAuB,CAAC,CAAC,CAACkD,IAAI,CAAEI,GAAG,IAAG;cAClChC,OAAO,CAAC,CAAE,GAAGgC,GAAG,CAACjC,IAAI,CAAE,CAAC;cACxBqB,UAAU,CAAC,CAAC;YAChB,CAAC,CAAC;UACN,CAAC,CAAC;QACN,CAAC,CAAC;MACN,CAAC,CAAC;IACN;EACJ,CAAC;EAED,oBACIzB,OAAA,CAACd,uBAAuB;IAACoD,GAAG,EAAC,EAAE;IAAAC,QAAA,gBAC3BvC,OAAA,CAACb,aAAa;MAAC,cAAW,sCAAQ;MAACqD,GAAG,EAAE9B,aAAa,CAAC,CAAC,CAAE;MAAC+B,OAAO,EAAE5B;IAAe;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eACpF7C,OAAA,CAACZ,YAAY;MAAC0D,IAAI,EAAC,MAAM;MAACC,MAAM,EAAC,kCAAkC;MAACC,QAAQ,EAAEhC,eAAgB;MAACtB,GAAG,EAAEkB;IAAU;MAAA8B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eAChH7C,OAAA,CAACX,cAAc;MAAC,cAAW,EAAE;MAAAkD,QAAA,gBACzBvC,OAAA,CAACV,SAAS;QAAC,cAAW,iCAAQ;QAACiC,KAAK,EAAEjB,IAAK;QAAC0C,QAAQ,EAAE1B,YAAa;QAAC2B,WAAW,EAAC;MAAY;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,eACzG7C,OAAA,CAACT,YAAY;QAAC,cAAW,iCAAQ;QAACgC,KAAK,EAAEf,OAAQ;QAACwC,QAAQ,EAAExB,eAAgB;QAACyB,WAAW,EAAC;MAAY;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAe,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzG,CAAC,eACjB7C,OAAA,CAACR,YAAY;MAAC,cAAW,2BAAO;MAACiD,OAAO,EAAEf,aAAc;MAAAa,QAAA,EAAC;IAAI;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAc,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACvD,CAAC;AAElC,CAAC;AAAA1C,EAAA,CAjEYF,gBAAgB;AAAAiD,EAAA,GAAhBjD,gBAAgB;AAAA,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}